[package]
authors     = { workspace = true }
categories  = ["database", "development-tools"]
description = "Generic schema migration system for switchy_database"
edition     = { workspace = true }
keywords    = ["database", "migration", "schema", "switchy"]
license     = { workspace = true }
name        = "switchy_schema"
readme      = "README.md"
repository  = { workspace = true }
version     = "0.1.0"

[package.metadata.workspaces]
group = "switchy"

[dependencies]
async-trait      = { workspace = true }
switchy_database = { workspace = true, features = ["schema"] }
thiserror        = { workspace = true }

# Optional dependencies for discovery features
bytes = { workspace = true }
include_dir = { workspace = true, optional = true }
switchy_fs = { workspace = true, optional = true, features = [
    "async",
    "tokio",
] }

[dev-dependencies]
switchy_async = { workspace = true, features = ["macros", "tokio"] }
switchy_fs    = { workspace = true, features = ["simulator-real-fs", "std"] }
tokio         = { workspace = true, features = ["macros", "rt"] }

[features]
default = ["all-discovery"]

fail-on-warnings = []

all-discovery = ["code", "directory", "embedded"]
code          = []
directory     = ["dep:switchy_fs"]
embedded      = ["dep:include_dir"]
test-utils    = []
validation    = []
