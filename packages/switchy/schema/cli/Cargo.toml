[package]
authors     = { workspace = true }
categories  = ["command-line-utilities", "database", "development-tools"]
description = "Command-line interface for switchy_schema migrations"
edition     = { workspace = true }
keywords    = ["cli", "database", "migration", "schema", "switchy"]
license     = { workspace = true }
name        = "switchy_schema_cli"
readme      = "README.md"
repository  = { workspace = true }
version     = "0.1.0"

[[bin]]
name = "switchy-migrate"
path = "src/main.rs"

[package.metadata]
examples = false

[package.metadata.workspaces]
group = "switchy"

[dependencies]
chrono = { workspace = true }
clap = { workspace = true, features = ["derive", "env"] }
colored = { workspace = true }
dialoguer = { workspace = true }
switchy_async = { workspace = true, features = ["macros", "tokio"] }
switchy_database = { workspace = true, features = ["schema"] }
switchy_database_connection = { workspace = true, features = [
    "postgres-sqlx",
    "sqlite-sqlx",
] }
switchy_fs = { workspace = true, features = ["std"] }
switchy_schema = { workspace = true, features = ["all-discovery"] }
thiserror = { workspace = true }

[dev-dependencies]
assert_cmd  = { workspace = true }
async-trait = { workspace = true }
bytes       = { workspace = true }
chrono      = { workspace = true }
insta       = { workspace = true, features = ["redactions"] }
predicates  = { workspace = true }
regex       = { workspace = true }
sha2        = { workspace = true }
tempfile    = { workspace = true }
test-log    = { workspace = true }

[features]
default = []

fail-on-warnings = [
    "switchy_async/fail-on-warnings",
    "switchy_database/fail-on-warnings",
    "switchy_database_connection/fail-on-warnings",
    "switchy_fs/fail-on-warnings",
    "switchy_schema/fail-on-warnings",
]
